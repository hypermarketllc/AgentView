# MyAgentView CRM - System Architecture

This document provides a visual representation of the MyAgentView CRM system architecture and component relationships.

## System Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                         MyAgentView CRM System                          │
│                                                                         │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────────────────┐  │
│  │             │      │             │      │                         │  │
│  │  Frontend   │◄────►│   Backend   │◄────►│        Database         │  │
│  │  (React)    │      │  (Express)  │      │      (PostgreSQL)       │  │
│  │             │      │             │      │                         │  │
│  └─────────────┘      └──────┬──────┘      └─────────────────────────┘  │
│                              │                                           │
│                              ▼                                           │
│                     ┌─────────────────┐                                  │
│                     │    External     │                                  │
│                     │    Services     │                                  │
│                     │                 │                                  │
│                     └─────────────────┘                                  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Component Relationships

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                         Frontend Components                             │
│                                                                         │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐  │
│  │             │   │             │   │             │   │             │  │
│  │    Auth     │──►│  Dashboard  │──►│    Deals    │──►│   Settings  │  │
│  │ Components  │   │ Components  │   │ Components  │   │ Components  │  │
│  │             │   │             │   │             │   │             │  │
│  └─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘  │
│         │                │                 │                 │          │
│         └────────────────┴─────────────────┴─────────────────┘          │
│                                   │                                     │
└───────────────────────────────────┼─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                          Backend Components                             │
│                                                                         │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐  │
│  │             │   │             │   │             │   │             │  │
│  │    Auth     │   │    API      │   │   System    │   │   Error     │  │
│  │   Service   │   │  Endpoints  │   │   Health    │   │  Logging    │  │
│  │             │   │             │   │  Monitor    │   │             │  │
│  └─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘  │
│         │                │                 │                 │          │
│         └────────────────┴─────────────────┴─────────────────┘          │
│                                   │                                     │
└───────────────────────────────────┼─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                         Database Components                             │
│                                                                         │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐  │
│  │             │   │             │   │             │   │             │  │
│  │    User     │   │    Deal     │   │ Commission  │   │   System    │  │
│  │   Tables    │   │   Tables    │   │   Tables    │   │   Tables    │  │
│  │             │   │             │   │             │   │             │  │
│  └─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Deployment Options

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                         Deployment Options                              │
│                                                                         │
│  ┌─────────────────────┐      ┌─────────────────────┐                   │
│  │                     │      │                     │                   │
│  │   Local Development │      │   Docker Deployment │                   │
│  │                     │      │                     │                   │
│  └─────────────────────┘      └─────────────────────┘                   │
│                                                                         │
│  ┌─────────────────────┐      ┌─────────────────────┐                   │
│  │                     │      │                     │                   │
│  │  PostgreSQL Server  │      │  Production Server  │                   │
│  │                     │      │                     │                   │
│  └─────────────────────┘      └─────────────────────┘                   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Database Schema

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                         Database Schema                                 │
│                                                                         │
│  ┌─────────────┐       ┌─────────────┐       ┌─────────────┐            │
│  │   users     │◄─────►│  auth_users │       │  user_accs  │            │
│  └──────┬──────┘       └─────────────┘       └─────────────┘            │
│         │                                                               │
│         │                                                               │
│         ▼                                                               │
│  ┌─────────────┐       ┌─────────────┐       ┌─────────────┐            │
│  │  positions  │◄─────►│    deals    │◄─────►│ commissions │            │
│  └─────────────┘       └──────┬──────┘       └──────┬──────┘            │
│                               │                     │                   │
│                               ▼                     ▼                   │
│                        ┌─────────────┐       ┌─────────────┐            │
│                        │   carriers  │       │ commission_ │            │
│                        └──────┬──────┘       │   splits    │            │
│                               │              └─────────────┘            │
│                               ▼                                         │
│                        ┌─────────────┐       ┌─────────────┐            │
│                        │   products  │       │system_health│            │
│                        └─────────────┘       │   _checks   │            │
│                                              └─────────────┘            │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Authentication Flow

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                         Authentication Flow                             │
│                                                                         │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                │
│  │             │     │             │     │             │                │
│  │    User     │────►│   Server    │────►│  Database   │                │
│  │             │     │             │     │             │                │
│  └─────────────┘     └─────────────┘     └─────────────┘                │
│        │ ▲               │ ▲                   │                        │
│        ▼ │               ▼ │                   │                        │
│  ┌─────────────┐     ┌─────────────┐           │                        │
│  │             │     │             │           │                        │
│  │  JWT Token  │◄───►│ Auth Check  │◄──────────┘                        │
│  │             │     │             │                                    │
│  └─────────────┘     └─────────────┘                                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## System Health Monitoring

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                      System Health Monitoring                           │
│                                                                         │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                │
│  │             │     │             │     │             │                │
│  │  Monitor    │────►│  API Check  │────►│  Database   │                │
│  │  Service    │     │             │     │             │                │
│  └─────────────┘     └─────────────┘     └─────────────┘                │
│        │                                       │                        │
│        ▼                                       │                        │
│  ┌─────────────┐                               │                        │
│  │             │                               │                        │
│  │  Dashboard  │◄──────────────────────────────┘                        │
│  │             │                                                        │
│  └─────────────┘                                                        │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Error Logging System

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│                        Error Logging System                             │
│                                                                         │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                │
│  │             │     │             │     │             │                │
│  │  Error      │────►│  Log to DB  │────►│  Database   │                │
│  │  Handler    │     │             │     │             │                │
│  └─────────────┘     └─────────────┘     └─────────────┘                │
│        │                                       │                        │
│        ▼                                       │                        │
│  ┌─────────────┐     ┌─────────────┐           │                        │
│  │             │     │             │           │                        │
│  │  WebSocket  │────►│  Dashboard  │◄──────────┘                        │
│  │  Server     │     │             │                                    │
│  └─────────────┘     └─────────────┘                                    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

These diagrams provide a visual representation of the MyAgentView CRM system architecture and component relationships. For more detailed information, refer to the comprehensive documentation in `MYAGENTVIEW_CRM_DOCUMENTATION.md`.
